[
  {
    "type": "pwa_boilerplate",
    "description": "A basic boilerplate for a Progressive Web App (PWA), including essential files and configurations.",
    "notes": [
      "This boilerplate provides offline caching for static assets using a Cache-first strategy.",
      "You'll need to create actual icon files (e.g., icon-192x192.png, icon-512x512.png) and place them in the 'icons' folder or adjust paths.",
      "To test, serve these files using a local web server (many IDEs have built-in ones, or use `npx http-server`). Service Workers require HTTPS, but `localhost` is an exception.",
      "Use browser developer tools (Application tab > Service Workers, Manifest, Storage) to inspect the PWA.",
      "Update `manifest.json` with your app's specific details."
    ],
    "fileStructure": [
      "./index.html",
      "./manifest.json",
      "./sw.js",
      "./js/app.js",
      "./css/style.css",
      "./icons/icon-192x192.png (example)",
      "./icons/icon-512x512.png (example)",
      "./README.md"
    ],
    "files": [
      {
        "name": "index.html",
        "path": "./index.html",
        "language": "html",
        "content": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta name=\"theme-color\" content=\"#317EFB\"/>\n    <title>My PWA</title>\n    <link rel=\"stylesheet\" href=\"css/style.css\">\n    <link rel=\"manifest\" href=\"manifest.json\">\n    <link rel=\"apple-touch-icon\" href=\"icons/icon-192x192.png\">\n</head>\n<body>\n    <header>\n        <h1>Welcome to My PWA!</h1>\n    </header>\n    <main>\n        <p>This is a simple Progressive Web App.</p>\n        <p>It can work offline after the first visit if the service worker is active.</p>\n        <button id=\"pushButton\">Enable Push Notifications</button>\n    </main>\n\n    <script src=\"js/app.js\"></script>\n</body>\n</html>"
      },
      {
        "name": "manifest.json",
        "path": "./manifest.json",
        "language": "json",
        "content": "{\n  \"name\": \"My Progressive Web App\",\n  \"short_name\": \"MyPWA\",\n  \"description\": \"A sample Progressive Web App to demonstrate features.\",\n  \"start_url\": \"/index.html\",\n  \"display\": \"standalone\",\n  \"background_color\": \"#ffffff\",\n  \"theme_color\": \"#317EFB\",\n  \"orientation\": \"portrait-primary\",\n  \"icons\": [\n    {\n      \"src\": \"icons/icon-72x72.png\",\n      \"sizes\": \"72x72\",\n      \"type\": \"image/png\",\n      \"purpose\": \"any maskable\"\n    },\n    {\n      \"src\": \"icons/icon-96x96.png\",\n      \"sizes\": \"96x96\",\n      \"type\": \"image/png\",\n      \"purpose\": \"any maskable\"\n    },\n    {\n      \"src\": \"icons/icon-128x128.png\",\n      \"sizes\": \"128x128\",\n      \"type\": \"image/png\",\n      \"purpose\": \"any maskable\"\n    },\n    {\n      \"src\": \"icons/icon-144x144.png\",\n      \"sizes\": \"144x144\",\n      \"type\": \"image/png\",\n      \"purpose\": \"any maskable\"\n    },\n    {\n      \"src\": \"icons/icon-152x152.png\",\n      \"sizes\": \"152x152\",\n      \"type\": \"image/png\",\n      \"purpose\": \"any maskable\"\n    },\n    {\n      \"src\": \"icons/icon-192x192.png\",\n      \"sizes\": \"192x192\",\n      \"type\": \"image/png\",\n      \"purpose\": \"any maskable\"\n    },\n    {\n      \"src\": \"icons/icon-384x384.png\",\n      \"sizes\": \"384x384\",\n      \"type\": \"image/png\",\n      \"purpose\": \"any maskable\"\n    },\n    {\n      \"src\": \"icons/icon-512x512.png\",\n      \"sizes\": \"512x512\",\n      \"type\": \"image/png\",\n      \"purpose\": \"any maskable\"\n    }\n  ],\n  \"shortcuts\": [\n    {\n      \"name\": \"Open Feature A\",\n      \"short_name\": \"Feature A\",\n      \"description\": \"Quickly open Feature A of MyPWA\",\n      \"url\": \"/feature-a.html\",\n      \"icons\": [{ \"src\": \"icons/icon-96x96.png\", \"sizes\": \"96x96\" }]\n    }\n  ],\n  \"related_applications\": [],\n  \"prefer_related_applications\": false\n}"
      },
      {
        "name": "sw.js",
        "path": "./sw.js",
        "language": "javascript",
        "content": "const CACHE_NAME = 'my-pwa-cache-v1';\nconst urlsToCache = [\n  '/',\n  '/index.html',\n  '/css/style.css',\n  '/js/app.js',\n  '/manifest.json',\n  '/icons/icon-192x192.png',\n  '/icons/icon-512x512.png'\n  // Add other important assets like fonts, other icons, etc.\n];\n\n// Install event: cache core assets\nself.addEventListener('install', event => {\n  console.log('[Service Worker] Install');\n  event.waitUntil(\n    caches.open(CACHE_NAME)\n      .then(cache => {\n        console.log('[Service Worker] Caching app shell');\n        return cache.addAll(urlsToCache);\n      })\n      .then(() => self.skipWaiting()) // Activate new SW immediately\n  );\n});\n\n// Activate event: clean up old caches\nself.addEventListener('activate', event => {\n  console.log('[Service Worker] Activate');\n  event.waitUntil(\n    caches.keys().then(cacheNames => {\n      return Promise.all(\n        cacheNames.map(cache => {\n          if (cache !== CACHE_NAME) {\n            console.log('[Service Worker] Clearing old cache:', cache);\n            return caches.delete(cache);\n          }\n        })\n      );\n    }).then(() => self.clients.claim()) // Take control of uncontrolled clients\n  );\n});\n\n// Fetch event: serve assets from cache or network\nself.addEventListener('fetch', event => {\n  // console.log('[Service Worker] Fetch event for:', event.request.url);\n  event.respondWith(\n    caches.match(event.request)\n      .then(response => {\n        if (response) {\n          // console.log('[Service Worker] Found in cache:', event.request.url);\n          return response; // Serve from cache\n        }\n        // console.log('[Service Worker] Network request for:', event.request.url);\n        return fetch(event.request).then(networkResponse => {\n          // Optional: Cache new requests dynamically if needed (be careful with this for non-static assets)\n          // if (networkResponse && networkResponse.status === 200 && event.request.method === 'GET') {\n          //   const responseToCache = networkResponse.clone();\n          //   caches.open(CACHE_NAME).then(cache => {\n          //     cache.put(event.request, responseToCache);\n          //   });\n          // }\n          return networkResponse; // Serve from network\n        });\n      })\n      .catch(error => {\n        console.error('[Service Worker] Fetch error:', error);\n        // Optional: return a fallback page for offline navigation errors\n        // if (event.request.mode === 'navigate') {\n        //   return caches.match('/offline.html'); // You would need to cache an offline.html page\n        // }\n      })\n  );\n});\n\n// Push Notification Event\nself.addEventListener('push', event => {\n  console.log('[Service Worker] Push Received.');\n  console.log(`[Service Worker] Push had this data: \"${event.data.text()}\"`);\n\n  const title = 'My PWA Push';\n  const options = {\n    body: event.data.text() || 'Yay a message.',\n    icon: 'icons/icon-192x192.png',\n    badge: 'icons/icon-72x72.png', // Small icon for notification bar\n    vibrate: [200, 100, 200]\n  };\n\n  event.waitUntil(self.registration.showNotification(title, options));\n});\n\n// Notification Click Event\nself.addEventListener('notificationclick', event => {\n  console.log('[Service Worker] Notification click Received.');\n  event.notification.close();\n  event.waitUntil(\n    clients.openWindow('https://example.com') // Or your app's main page\n  );\n});\n"
      },
      {
        "name": "app.js",
        "path": "./js/app.js",
        "language": "javascript",
        "content": "// Service Worker Registration\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', () => {\n    navigator.serviceWorker.register('/sw.js')\n      .then(registration => {\n        console.log('ServiceWorker registration successful with scope: ', registration.scope);\n      })\n      .catch(err => {\n        console.log('ServiceWorker registration failed: ', err);\n      });\n  });\n}\n\n// Basic Push Notification Logic (requires server-side VAPID setup for real pushes)\nconst pushButton = document.getElementById('pushButton');\nlet isSubscribed = false;\nlet swRegistration = null;\n\nfunction urlB64ToUint8Array(base64String) {\n    const padding = '='.repeat((4 - base64String.length % 4) % 4);\n    const base64 = (base64String + padding)\n        .replace(/\\-/g, '+')\n        .replace(/_/g, '/');\n\n    const rawData = window.atob(base64);\n    const outputArray = new Uint8Array(rawData.length);\n\n    for (let i = 0; i < rawData.length; ++i) {\n        outputArray[i] = rawData.charCodeAt(i);\n    }\n    return outputArray;\n}\n\n// Replace with your actual VAPID public key\nconst applicationServerPublicKey = 'YOUR_VAPID_PUBLIC_KEY_HERE'; \n\nfunction updateBtn() {\n    if (Notification.permission === 'denied') {\n        pushButton.textContent = 'Push Messaging Blocked.';\n        pushButton.disabled = true;\n        return;\n    }\n    if (isSubscribed) {\n        pushButton.textContent = 'Disable Push Messaging';\n    } else {\n        pushButton.textContent = 'Enable Push Messaging';\n    }\n    pushButton.disabled = false;\n}\n\nfunction subscribeUser() {\n    const applicationServerKey = urlB64ToUint8Array(applicationServerPublicKey);\n    swRegistration.pushManager.subscribe({\n        userVisibleOnly: true,\n        applicationServerKey: applicationServerKey\n    })\n    .then(subscription => {\n        console.log('User is subscribed:', subscription);\n        // TODO: Send subscription to your server\n        // sendSubscriptionToServer(subscription);\n        isSubscribed = true;\n        updateBtn();\n    })\n    .catch(err => {\n        console.error('Failed to subscribe the user: ', err);\n        updateBtn();\n    });\n}\n\nfunction unsubscribeUser() {\n    swRegistration.pushManager.getSubscription()\n    .then(subscription => {\n        if (subscription) {\n            return subscription.unsubscribe();\n        }\n    })\n    .catch(error => {\n        console.error('Error unsubscribing', error);\n    })\n    .then(() => {\n        console.log('User is unsubscribed.');\n        // TODO: Notify server about unsubscription\n        isSubscribed = false;\n        updateBtn();\n    });\n}\n\nfunction initializeUI() {\n    pushButton.addEventListener('click', () => {\n        pushButton.disabled = true;\n        if (isSubscribed) {\n            unsubscribeUser();\n        } else {\n            subscribeUser();\n        }\n    });\n\n    // Set the initial subscription value\n    swRegistration.pushManager.getSubscription()\n    .then(subscription => {\n        isSubscribed = !(subscription === null);\n        updateBtn();\n    });\n}\n\nif ('serviceWorker' in navigator && 'PushManager' in window) {\n    console.log('Service Worker and Push is supported');\n    navigator.serviceWorker.ready.then(registration => {\n        swRegistration = registration;\n        initializeUI();\n    }).catch(error => {\n        console.error('Service Worker Error', error);\n    });\n} else {\n    console.warn('Push messaging is not supported');\n    if(pushButton) pushButton.textContent = 'Push Not Supported';\n}\n\n// Example function to send subscription to server (you need to implement this)\n// function sendSubscriptionToServer(subscription) {\n//   return fetch('/api/subscribe', {\n//     method: 'POST',\n//     headers: {\n//       'Content-Type': 'application/json'\n//     },\n//     body: JSON.stringify(subscription)\n//   })\n//   .then(response => {\n//     if (!response.ok) {\n//       throw new Error('Bad status code from server.');\n//     }\n//     return response.json();\n//   })\n//   .then(responseData => {\n//     if (!(responseData.data && responseData.data.success)) {\n//       throw new Error('Bad response from server.');\n//     }\n//   });\n// }\n"
      },
      {
        "name": "style.css",
        "path": "./css/style.css",
        "language": "css",
        "content": "body {\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif;\n    margin: 0;\n    padding: 0;\n    background-color: #f4f4f4;\n    color: #333;\n    line-height: 1.6;\n}\n\nheader {\n    background: #317EFB;\n    color: #fff;\n    padding: 1rem 0;\n    text-align: center;\n}\n\nheader h1 {\n    margin: 0;\n    font-size: 1.8rem;\n}\n\nmain {\n    padding: 1rem;\n    text-align: center;\n}\n\nbutton {\n    background-color: #317EFB;\n    color: white;\n    border: none;\n    padding: 10px 20px;\n    text-align: center;\n    text-decoration: none;\n    display: inline-block;\n    font-size: 16px;\n    margin: 10px 2px;\n    cursor: pointer;\n    border-radius: 5px;\n    transition: background-color 0.3s ease;\n}\n\nbutton:hover {\n    background-color: #0056b3;\n}\n\nbutton:disabled {\n    background-color: #cccccc;\n    color: #666666;\n    cursor: not-allowed;\n}\n\n/* Basic responsive design */\n@media (max-width: 600px) {\n    header h1 {\n        font-size: 1.5rem;\n    }\n    main p {\n        font-size: 0.9rem;\n    }\n}"
      },
      {
        "name": "README.md",
        "path": "./README.md",
        "language": "markdown",
        "content": "# Basic PWA Boilerplate\n\nThis is a minimal boilerplate to get started with a Progressive Web App.\n\n## File Structure\n\n```\n.\n├── index.html         # Main HTML page\n├── manifest.json      # Web App Manifest\n├── sw.js              # Service Worker script\n├── js/\n│   └── app.js         # Main application JavaScript (SW registration, etc.)\n├── css/\n│   └── style.css      # Basic CSS styles\n└── icons/             # Directory for PWA icons\n    ├── icon-192x192.png # Example icon (replace with your own)\n    └── icon-512x512.png # Example icon (replace with your own)\n```\n\n## Features Implemented\n\n*   **Web App Manifest (`manifest.json`):** Allows the app to be \"installed\" to the home screen, defining its appearance and behavior.\n*   **Service Worker (`sw.js`):** \n    *   Caches core application assets (`index.html`, CSS, JS, main icons) on install.\n    *   Serves cached assets when offline (Cache-first strategy for defined assets).\n    *   Cleans up old caches on activation.\n    *   Basic Push Notification event handling (receiving and displaying).\n*   **Basic UI (`index.html`, `style.css`):** A simple landing page.\n*   **Service Worker Registration (`app.js`):** Registers the service worker.\n*   **Basic Push Subscription UI (`app.js`, `index.html`):** Includes a button to request push notification permission and subscribe/unsubscribe. **Note:** Real push notifications require a server-side component with VAPID keys to send messages.\n\n## Getting Started\n\n1.  **Create Icon Files:**\n    *   Create your app icons (e.g., `icon-192x192.png`, `icon-512x512.png`, and other sizes specified in `manifest.json`).\n    *   Place them in the `icons/` directory or update the paths in `manifest.json` and `sw.js`.\n\n2.  **Update Manifest (`manifest.json`):**\n    *   Change `name`, `short_name`, `description`, `theme_color`, `background_color` to match your application.\n    *   Ensure icon paths are correct.\n\n3.  **Configure VAPID Key for Push Notifications (Optional but Recommended for Push):**\n    *   Generate VAPID keys (public and private). Many online tools or libraries like `web-push` for Node.js can do this.\n    *   Replace `YOUR_VAPID_PUBLIC_KEY_HERE` in `js/app.js` with your actual VAPID public key.\n    *   You will need the private key on your server to send push messages.\n\n4.  **Serve Files:**\n    *   You need to serve these files from a web server.\n    *   For local development, you can use simple HTTP servers:\n        *   If you have Node.js: `npx http-server` in the project root.\n        *   Many code editors (like VS Code with the \"Live Server\" extension) have built-in servers.\n    *   **Important:** Service Workers (and thus many PWA features) require HTTPS to function in a production environment. However, `http://localhost` is treated as a secure origin by browsers, so it works fine for local development.\n\n5.  **Test in Browser:**\n    *   Open your browser (Chrome, Edge, Firefox, Safari) and navigate to the local address where your app is being served (e.g., `http://localhost:8080`).\n    *   Open Developer Tools:\n        *   **Application Tab (Chrome/Edge):** Check the `Manifest` section for errors, the `Service Workers` section to see if `sw.js` is registered and activated, and the `Storage` section (Cache Storage) to see cached assets.\n        *   **Storage Tab (Firefox):** Similar sections for Manifest, Service Workers, and Cache.\n\n## Next Steps\n\n*   **Add More Assets to Cache:** Update `urlsToCache` in `sw.js` with all your static assets (images, fonts, etc.).\n*   **Implement Dynamic Caching:** For API responses or assets not known at build time, you might want to add logic in the `fetch` event handler of `sw.js` to cache them dynamically.\n*   **Offline Fallback Page:** Create an `offline.html` page and modify the `fetch` event in `sw.js` to serve it when a network request fails for navigation.\n*   **Background Sync:** Explore the Background Sync API for deferring actions until the user has connectivity.\n*   **Server-Side Push Logic:** To send actual push notifications, you'll need a server that can receive the subscription object (from `js/app.js`) and use a library (like `web-push` for Node.js) with your VAPID keys to send messages via push services (e.g., FCM, APNS).\n*   **Build Your Application Logic:** Flesh out `index.html` and `js/app.js` with your actual app's features."
      }
    ]
  }
]``
